
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>上海博为峰软件技术股份有限公司</title>
		<link rel="stylesheet" href="${rc.contextPath}/css/bootstrap.min.css" />
		<link rel="stylesheet" href="${rc.contextPath}/css/animate.min.css" />
		<script type="text/javascript" src="${rc.contextPath}/js/jquery.min.js" ></script>
		<script type="text/javascript" src="${rc.contextPath}/js/bootstrap.min.js" ></script>
		<script type="text/javascript" src="${rc.contextPath}/js/wow.js" ></script>
		<link rel="stylesheet" href="${rc.contextPath}/css/global.css" />
		<script type="text/javascript" src="${rc.contextPath}/js/global.js" ></script>
		<style>
			html {
            background: url(${rc.contextPath}/img/bg5.jpg) no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }
        </style>
		<script type="text/javascript">
			$(function(){
				
				<!-- 上一页 -->	
				$("#prevPage").click(function(){
			
					location.href="${rc.contextPath}/user/show?page="+(${page}-1);
				});	
				
				<!-- 下一页 -->
				$("#nextPage").click(function(){
					location.href="${rc.contextPath}/user/show?page="+(${page}+1);
				});	
				
				<!-- 触发是否删除 -->
				var id;
				$('.delete-user').click(function(){
					id=$(this).prev().val();
					
					$('#openModal').trigger('click');
					
					<!-- 删除 -->
					$('#doDelete').click(function(){
							location.href = '${rc.contextPath}/user/delete/' + id ;
					});
				
				});
				
				<!-- 批量删除 -->
				$('#deleteMulti').click(function(){
					$('#openModal').trigger('click');
					<!-- 删除 -->
					$('#doDelete').click(function(){
						
						if($('.num').val()!=1){
							$('#form1').submit();
						}			
					});
				});
				<!-- 新增员工 -->
				$('#addUser').click(function(){
					location.href='${rc.contextPath}/user/add';
				});		
				
				<!-- 编辑 进入到更新用户信息页面 -->						
				$('.update').click(function(){
					id=$(this).next().val();
					location.href='${rc.contextPath}/user/update/'+id;
				});
			});			
		</script>
	</head>
	<body>
			
			<div class="panel panel-default">
				<div class="panel-heading">
					员工管理
					<div class="btn-group btn-group-sm pull-right">
					<button type="button" class="btn btn-default " id="deleteMulti">
						<img src="${rc.contextPath}/img/7.png" height="16px"/>
						&nbsp;&nbsp;批量删除
					</button>
					<button type="button" class="btn btn-default" id="addUser">
						<img src="${rc.contextPath}/img/plus.png" height="16px"/>
						&nbsp;&nbsp;添加数据
					</button>
					</div>
				</div>
				
				<div class="panel-body">
					
					
						
						<table class="table table-bordered table-condensed table-hover table-responsive cbx-group">
							<thead>
								<tr>
									<th class="td-checkbox"><input type="checkbox" class="cbx-all"/></th>
									<th>员工编号</th>
									<th>用户名</th>
									<th>昵称</th>
									<th>上级领导</th>	
									<th>头像</th>				
									<th>操作选项</th>
								</tr>
							</thead>
							<tbody>
								<form id="form1" action="${rc.contextPath}/user/delete" method="get">
								<#list allUsersByPage as user1>
									<tr>
										<td align="center" class="td-checkbox">
										<input type="checkbox" class="num" name="id" value="${user1.userId}"/>
										</td>
										<td>${user1.userId}</td>
										<td>${user1.username}</td>
										<td>${user1.nickname}</td>
										<td>${user1.leader.nickname}</td>
										<td><img style="height:30px;" class="image image-responsive" src="${rc.contextPath}/img/avaters/${user1.avater}"/></td>
										<td width="120px">
											<span class="btn-group btn-group-xs" >
												<button type="button" class="btn btn-default">查看</button>
												<button type="button" class="btn btn-default update">编辑</button>
												<input type="hidden"  value="${user1.userId}">
												<button type="button" class="btn btn-danger delete-user">删除</button>
											</span>
										</td>
									</tr>
								</#list>
								</form>
							</tbody>
							<tfoot>
								
							</tfoot>
						</table>
						
						<div class="row">
							<div class="col-lg-8 col-md-7 col-sm-7 col-xs-5">
								<div class="btn-group btn-group-sm">
									<button type="button" class="btn btn-darkgreen">
										<span class="hidden-xs hidden-sm"> 首 页 </span>
										<span class="hidden-lg hidden-md"> |&lt; </span>
									</button>
									<button type="button" class="btn btn-darkgreen" id="prevPage">
										<span class="hidden-xs hidden-sm"> 上一页 </span>
										<span class="hidden-lg hidden-md"> &lt;&lt; </span>
									</button>
									<button type="button" class="btn btn-default hidden-xs hidden-sm">
										.…
									</button>
									<button type="button" class="btn btn-default hidden-xs hidden-sm hidden-md">
										3
									</button>
									<button type="button" class="btn btn-default hidden-xs hidden-sm">
										4
									</button>
									<button type="button" class="btn btn-default hidden-xs">
										5
									</button>
									<button type="button" class="btn btn-default hidden-xs">
										6
									</button>
									<button type="button" class="btn btn-darkgreen hidden-xs">
										7
									</button>
									<button type="button" class="btn btn-default hidden-xs">
										8
									</button>
									<button type="button" class="btn btn-default hidden-xs">
										9
									</button>
									<button type="button" class="btn btn-default hidden-xs hidden-sm">
										10
									</button>
									<button type="button" class="btn btn-default hidden-xs hidden-sm hidden-md">
										11
									</button>
									<button type="button" class="btn btn-default hidden-xs hidden-sm">
										.…
									</button>
									<button type="button" class="btn btn-darkgreen" id="nextPage">
										<span class="hidden-xs hidden-sm" > 下一页 </span>
										<span class="hidden-lg hidden-md"> &gt;&gt; </span>
									</button>
									<button type="button" class="btn btn-darkgreen">
										<span class="hidden-xs hidden-sm"> 末 页 </span>
										<span class="hidden-lg hidden-md"> &gt;| </span>
									</button>
								</div>
								
							</div>
							<div class="col-lg-4 col-md-5 col-sm-5 col-xs-7">
								<div class="input-group input-group-sm">
									<input type="text" class="form-control" placeholder="7" />
									<span class="input-group-addon"> / 60 页 </span>
									<div class="input-group-btn">
										<button type="button" class="btn btn-darkgreen">
											Go
										</button>
									</div>
								</div>
							</div>
						</div>	
				</div>
			</div>
						<!-- 按钮触发模态框 -->
			<input id="openModal" type="hidden" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal" value="开始演示模态框"/>
			<!-- 模态框（Modal） -->
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			    <div class="modal-dialog">
			        <div class="modal-content">
			            <div class="modal-header">
			                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
			                <h4 class="modal-title" id="myModalLabel">确认是否删除？</h4>
			            </div>
			            <div id="errorMessage" class="modal-body">删除后无法找到数据！</div>
			            <div class="modal-footer">
			                <button type="button" class="btn btn-default" data-dismiss="modal" id="doDelete">确认</button>
			                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			            </div>
			        </div><!-- /.modal-content -->
			    </div><!-- /.modal -->
			</div>			
			<div style="height: 80px;"></div>
		
	</body>
</html>

